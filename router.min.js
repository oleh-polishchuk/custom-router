'use strict';var _createClass=function(){function a(b,c){for(var e,d=0;d<c.length;d++)e=c[d],e.enumerable=e.enumerable||!1,e.configurable=!0,'value'in e&&(e.writable=!0),Object.defineProperty(b,e.key,e)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var Router=function(){function a(b){_classCallCheck(this,a),this.navigateToAttribute='navigate-to',this.viewNameAttribute='view-name',this.routes=b||[]}return _createClass(a,[{key:'init',value:function init(){var b=this;this.injectStyles(),this.onUserNavigate(function(c){b.updateState(c)}),this.onStateChange(function(){b.updateView()}),this.updateView(),a.log('Router successfully initialized')}},{key:'onUserNavigate',value:function onUserNavigate(b){var c=this;$('['+c.navigateToAttribute+']').click(function(){var d=$(this).attr(''+c.navigateToAttribute);b(d)})}},{key:'onStateChange',value:function onStateChange(b){$(window).on('popstate',b)}},{key:'updateState',value:function updateState(b){document.title=this.getTitleByUrl(b),window.history.pushState({},'',b),dispatchEvent(new PopStateEvent('popstate',{state:{}}))}},{key:'getTitleByUrl',value:function getTitleByUrl(b){var c=this.routes.find(function(d){return d.path===b});return c&&c.title}},{key:'updateView',value:function updateView(){var b=this.getCurrentPath(),c=this.getViewNameByUrlOrDefault(b);this.hideContent(),this.showContentByViewName(c)}},{key:'getCurrentPath',value:function getCurrentPath(){return window.location.pathname}},{key:'hideContent',value:function hideContent(){$('['+this.viewNameAttribute+']').each(function(b,c){$(c).removeClass('show')})}},{key:'showContentByViewName',value:function showContentByViewName(b){$('['+this.viewNameAttribute+'="'+b+'"]').each(function(c,d){var e=$(d);e.hasClass('show')||e.addClass('show')})}},{key:'getViewNameByUrlOrDefault',value:function getViewNameByUrlOrDefault(b){var c=this.getViewNameByUrl(b);return c?c:this.getDefaultViewName()}},{key:'getViewNameByUrl',value:function getViewNameByUrl(b){var c=this.routes.find(function(d){return d.path===b});return c&&c.viewName}},{key:'getDefaultViewName',value:function getDefaultViewName(){var b=this.routes.find(function(c){return c.defaultView});return b&&b.viewName}},{key:'injectStyles',value:function injectStyles(){var b=document.createElement('style');b.appendChild(document.createTextNode('\n            ['+this.viewNameAttribute+'] {\n                display: none;\n            }\n\n            ['+this.viewNameAttribute+'].show { \n                display: block; \n            }\n        ')),document.getElementsByTagName('body')[0].appendChild(b)}}],[{key:'log',value:function log(b){console.log('==> '+b)}}]),a}();
