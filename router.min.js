"use strict";function _defineProperties(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Route=function t(e){var a=e.path,n=void 0===a?"/":a,i=e.viewName,o=void 0===i?"":i,u=e.title,r=void 0===u?"":u,s=e.defaultView,c=void 0!==s&&s;_classCallCheck(this,t),this.path=n,this.viewName=o,this.title=r,this.defaultView=c},RouteManager=function(){function t(){_classCallCheck(this,t),this.routes=[]}return _createClass(t,[{key:"addRoute",value:function(t){this.routes.push(t)}},{key:"getCurrentRouteOrDefault",value:function(){var t=this.routes.find(function(t){return t.defaultView}),e=this.routes.find(function(t){return t.path===window.location.pathname});return e||t}},{key:"getRouteByUrlOrDefault",value:function(e){var t=this.routes.find(function(t){return t.defaultView}),a=this.routes.find(function(t){return t.path===e});return a||t}}]),t}(),State=function(){function e(t){_classCallCheck(this,e),this.routeManager=t}return _createClass(e,[{key:"update",value:function(){var t=this.routeManager.getCurrentRouteOrDefault();this.updateState(t)}},{key:"updateByUrl",value:function(t){var e=this.routeManager.getRouteByUrlOrDefault(t);this.updateState(e)}},{key:"updateState",value:function(t){var e="".concat(t.path).concat(window.location.hash||window.location.search);document.title=t.title,window.history.pushState({route:t},"",e),dispatchEvent(new PopStateEvent("popstate",{state:{}}))}},{key:"onChange",value:function(t){$(window).on("popstate",t)}}]),e}(),View=function(){function a(t,e){_classCallCheck(this,a),this.routeManager=t,this.attributes=e}return _createClass(a,[{key:"update",value:function(){var t=this.routeManager.getCurrentRouteOrDefault();this._hideContent(),this._showContentByViewName(t.viewName)}},{key:"onClickNavigateTo",value:function(a){var n=this;$("[".concat(n.attributes.navigateTo,"]")).click(function(t){t.preventDefault();var e=$(this).attr("".concat(n.attributes.navigateTo));a(e)})}},{key:"_hideContent",value:function(){$("[".concat(this.attributes.viewName,"]")).each(function(t,e){$(e).removeClass("show")})}},{key:"_showContentByViewName",value:function(t){$("[".concat(this.attributes.viewName,'="').concat(t,'"]')).each(function(t,e){var a=$(e);a.hasClass("show")||a.addClass("show")})}},{key:"injectStyles",value:function(){var t=document.createElement("style");t.appendChild(document.createTextNode("\n            [".concat(this.attributes.viewName,"] {\n                display: none;\n            }\n\n            [").concat(this.attributes.viewName,"].show { \n                display: block; \n            }\n        "))),document.getElementsByTagName("body")[0].appendChild(t)}}]),a}(),Router=function(){function t(){_classCallCheck(this,t),this.routeManager=new RouteManager,this.state=new State(this.routeManager),this.attributes={},this.view=new View(this.routeManager,this.attributes)}return _createClass(t,[{key:"setAttributes",value:function(t){for(var e in t)this.attributes[e]=t[e]}},{key:"addRoutes",value:function(t){var e=!0,a=!1,n=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var u=i.value;this.routeManager.addRoute(new Route(u))}}catch(t){a=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(a)throw n}}}},{key:"initialize",value:function(){var e=this;this.view.injectStyles(),this.view.onClickNavigateTo(function(t){e.state.updateByUrl(t)}),this.state.onChange(function(){e.view.update()}),this.state.update(),t.log("Router successfully initialized")}}],[{key:"log",value:function(t){console.log("==> ".concat(t))}}]),t}();